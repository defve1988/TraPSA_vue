(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7201d0ea"],{"89e8":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("99af"),r("cb29"),r("a630"),r("d81d"),r("d3b7"),r("3ca3"),r("c96a"),r("ddb0");var a=r("3835"),l=r("b85c"),i=r("d4ec"),n=r("bee2"),o=r("030a"),s=r.n(o);function u(e,t){3===e.length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]));var r=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),l=parseInt(e.substring(4,6),16);return"rgba(".concat(r,",").concat(a,",").concat(l,",").concat(t,")")}var c=function(){function e(t){Object(i["a"])(this,e),this.case_name=t,this.small_fig={width:300,height:180},this.medium_fig={width:600,height:400},this.large_fig={width:1180,height:600},this.small_margin={r:20,t:25,b:25,l:20},this.medium_margin={r:20,t:25,b:25,l:20},this.large_margin={r:100,t:50,b:75,l:125},this.color_theme=["1E88E5","28965A","E53E20","7CB342","d95282","FBC02D","00B8DC","232322","AAAAAA"],this.plotly_config={small:{displaylogo:!1,responsive:!0,displayModeBar:!1,staticPlot:!0},medium:{displaylogo:!1,responsive:!0,displayModeBar:!1,staticPlot:!1},large:{displaylogo:!1,responsive:!0,displayModeBar:!1,staticPlot:!1,editable:!0}},this.layout_default={small:{margin:this.small_margin,width:this.small_fig.width,height:this.small_fig.height,font:{size:10},showlegend:!1,autosize:!0},medium:{margin:this.medium_margin,width:this.medium_fig.width,height:this.medium_fig.height,font:{size:14},showlegend:!0,legend:{font:{size:12},xanchor:"auto",yanchor:"auto",x:1,y:0},autosize:!0},large:{margin:this.large_margin,width:this.large_fig.width,height:this.large_fig.height,font:{size:14},showlegend:!0,legend:{font:{size:12},xanchor:"auto",yanchor:"auto",x:1,y:0},autosize:!0}}}return Object(n["a"])(e,[{key:"clear",value:function(e){s.a.purge(e)}},{key:"save_image",value:function(e,t){s.a.toImage(e,{format:"png",height:800,width:1200}).then((function(e){var r=document.createElement("a");r.href=e,r.setAttribute("download",t+".png"),r.click()}))}},{key:"set_fig_size",value:function(e,t,r){"small"==e?(this.layout_default.small.width=t.width,this.layout_default.small.height=t.height,this.layout_default.small.margin=r):"medium"==e?(this.layout_default.medium.width=t.width,this.layout_default.medium.height=t.height,this.layout_default.medium.margin=r):(this.layout_default.large.width=t.width,this.layout_default.large.height=t.height,this.layout_default.large.margin=r)}},{key:"set_layout",value:function(e,t){return"small"==e?Object.assign(this.layout_default.small,t):"medium"==e?Object.assign(this.layout_default.medium,t):Object.assign(this.layout_default.large,t)}},{key:"set_title",value:function(e,t){var r={title:t};s.a.relayout(e,r)}},{key:"plot_hist",value:function(e,t,r){var i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=0,c=[],h=Object(l["a"])(t.entries());try{for(h.s();!(i=h.n()).done;){var d=Object(a["a"])(i.value,2),p=d[0],f=d[1];c.push({x:f.x,name:f.chemical,autobinx:!0,histnorm:"count",marker:{color:u(this.color_theme[(p+o)%9],1),line:{color:u(this.color_theme[(p+o)%9],1),width:1}},opacity:.7,type:"histogram"})}}catch(y){h.e(y)}finally{h.f()}var g={bargap:.05,bargroupgap:.2,barmode:"overlay",title:"small"==r?"":"Histgram",xaxis:"small"==r?{}:{title:"Value"},yaxis:"small"==r?{}:{title:"Count"}};Object.assign(g,n);var m=this.set_layout(r,g);s.a.newPlot(e,c,m,this.plotly_config[r])}},{key:"plot_line",value:function(e,t,r){var i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=1,c=[],h=Object(l["a"])(t.entries());try{for(h.s();!(i=h.n()).done;){var d=Object(a["a"])(i.value,2),p=d[0],f=d[1];c.push({mode:"lines",name:f.chemical,x:f.x,y:f.y,connectgaps:!1,line:{color:u(this.color_theme[(p+o)%9],.7)},marker:{size:"small"==r?2:5,color:u(this.color_theme[p],.7)}})}}catch(y){h.e(y)}finally{h.f()}var g={title:"small"==r?"":"Time Series",xaxis:"small"==r?{type:"date",tickformat:"%b %Y"}:{title:"Date",type:"date",tickformat:"%b-%d %Y"},yaxis:"small"==r?{}:{title:"Conc."}};Object.assign(g,n);var m=this.set_layout(r,g);s.a.newPlot(e,c,m,this.plotly_config[r])}},{key:"plot_averaged_box",value:function(e,t,r,i){var n,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=[],h="",d="",p="",f=[],g=Object(l["a"])(t.entries());try{for(g.s();!(n=g.n()).done;){var m=Object(a["a"])(n.value,2),y=m[0],v=m[1],w=[];switch(i){case"monthly":w=v.x.map((function(e){return e.getMonth()})),d="Monthly",p="month",h=u(this.color_theme[(y+2)%9],.7),f=Array.from(Array(12).keys());break;case"diel":w=v.x.map((function(e){return e.getHours()})),d="Diel",p="hour",h=u(this.color_theme[(y+3)%9],.7),f=Array.from(Array(24).keys());break;case"weekday":w=v.x.map((function(e){return e.getDay()})),d="Weekday",p="weekday",h=u(this.color_theme[(y+4)%9],.7),f=Array.from(Array(7).keys());break}c.push({x:w,y:v.y,name:v.chemical,marker:{color:h,outliercolor:"rgba(219, 64, 82, 0.6)",line:{outliercolor:"rgba(219, 64, 82, 1.0)"}},type:"box",boxpoints:"Outliers"})}}catch(x){g.e(x)}finally{g.f()}var _={boxmode:"group",title:"small"==r?"":d,xaxis:"small"==r?{tickvals:f,ticktext:f}:{title:p,tickvals:f,ticktext:f},yaxis:"small"==r?{}:{title:"Conc."}};Object.assign(_,o);var b=this.set_layout(r,_);s.a.newPlot(e,c,b,this.plotly_config[r])}},{key:"plot_trend",value:function(e,t,r){var i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=5,c=[],h=Object(l["a"])(t.entries());try{for(h.s();!(i=h.n()).done;){var d=Object(a["a"])(i.value,2),p=d[0],f=d[1];c.push({type:"scatter",mode:"markers",name:f.chemical,x:f.x,y:f.y,connectgaps:!1,line:{color:u(this.color_theme[(p+o)%9],.5)},trendline:"ols",marker:{size:"small"==r?2:5,color:u(this.color_theme[p],.7)}}),c.push({type:"scatter",mode:"lines",name:f.chemical,x:[new Date(f.lr.line.x1),new Date(f.lr.line.x2)],y:[f.lr.line.y1,f.lr.line.y2],connectgaps:!1,line:{color:u(this.color_theme[(p+o)%9],1)}})}}catch(y){h.e(y)}finally{h.f()}var g={title:"small"==r?"":"Trend",xaxis:"small"==r?{type:"date",tickformat:"%b %Y"}:{title:"Date",type:"date",tickformat:"%b-%d %Y"},yaxis:"small"==r?{}:{title:"Conc."}};Object.assign(g,n);var m=this.set_layout(r,g);s.a.newPlot(e,c,m,this.plotly_config[r])}},{key:"plot_windrose",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=["North","NNE","NE","ENE","East","ESE","SE","SSE","South","SSW","SW","WSW","West","WNS","NW","NNW"];null==t&&(t=[{r:new Array(16).fill(0),theta:l,type:"barpolar"}]);var i={title:"small"==r?"":"Wind Rose",polar:{barmode:"overlay",bargap:0,radialaxis:{ticksuffix:"%",angle:45,dtick:5},angularaxis:{direction:"clockwise"}}};Object.assign(i,a);var n=this.set_layout(r,i);s.a.newPlot(e,t,n,this.plotly_config[r])}},{key:"plot_cpf",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=[t.high,t.all],i={title:"small"==r?"":"CPF Analysis",polar:{radialaxis:{ticksuffix:"%",angle:45,dtick:5},angularaxis:{direction:"clockwise"}}};Object.assign(i,a);var n=this.set_layout(r,i);s.a.newPlot(e,l,n,this.plotly_config[r])}},{key:"plot_cbpf",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l={title:"small"==r?"":"CBPF Analysis",polar:{bgcolor:"#162876",radialaxis:{ticksuffix:"%",angle:45,dtick:5},angularaxis:{direction:"clockwise",tickwidth:2,linewidth:3,layer:"below traces"}}};Object.assign(l,a);var i=this.set_layout(r,l);s.a.newPlot(e,t,i,this.plotly_config[r])}}]),e}()},cf1c:function(e,t,r){"use strict";r("cb29"),r("4de4"),r("7db0"),r("caad"),r("d81d"),r("13d5"),r("2532"),r("96cf");var a=r("1da1");function l(){}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.7,a=[{d:"N",lower:348.75,upper:11.25},{d:"NNE",lower:11.25,upper:33.75},{d:"NE",lower:33.75,upper:56.25},{d:"ENE",lower:56.25,upper:78.75},{d:"E",lower:78.75,upper:101.25},{d:"ESE",lower:101.25,upper:123.75},{d:"SE",lower:123.75,upper:146.25},{d:"SSE",lower:146.25,upper:168.75},{d:"S",lower:168.75,upper:191.25},{d:"SSW",lower:191.25,upper:213.75},{d:"SW",lower:213.75,upper:236.25},{d:"WSW",lower:236.25,upper:258.75},{d:"W",lower:258.75,upper:281.25},{d:"WNS",lower:281.25,upper:303.75},{d:"NW",lower:303.75,upper:326.25},{d:"NNW",lower:326.25,upper:348.75}],l=null;e.sort((function(e,t){return e.selected_chemical>t.selected_chemical?-1:1})),l=e[parseInt(e.length*(1-r))].selected_chemical;var i=t.reduce((function(e,t){return t.wind_speed>e?t.wind_speed:e}),-999),n=Array(parseInt(i)+1).fill(0),o=Array(parseInt(i)+1).fill(0);n=n.map((function(e,t){return{speed:t+1,r:Array(16).fill(0)}})),o=o.map((function(e,t){return{speed:t+1,r:Array(16).fill(0)}}));for(var s,u,c,h,d,p=0,f=0,g=function(r){if(s=t[r].wind_direction,u=t[r].wind_speed,d=e.find((function(e){return e.TimeString==t[r].TimeString})),null!==s&&null!==u&&void 0!==d){if(d=d.selected_chemical,s>348.75)c=0;else for(var i=1;i<a.length;i++)if(s<=a[i].upper){c=i;break}for(var g=0;g<n.length;g++)if(u<=n[g].speed){h=g;break}o[h].r[c]+=1,f+=1,d>l&&(n[h].r[c]+=1,p+=1)}},m=0;m<t.length;m++)g(m);for(var y=Array(16).fill(0),v=Array(16).fill(0),w=0;w<a.length;w++)for(var _=0;_<n.length;_++)n[_].r[w]>0&&(y[w]+=n[_].r[w]),o[_].r[w]>0&&(v[w]+=o[_].r[w]);y=y.map((function(e){return e/p})),v=v.map((function(e){return e/f}));for(var b=[{value:.2,color:"#2F528F"},{value:.15,color:"#A0DAB7"},{value:.1,color:"#1F93C0"},{value:.05,color:"#162876"}],x=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNS","NW","NNW"],k=[],S=0;S<b.length;S++){var E={r:[],theta:[],type:"scatterpolargl",mode:"markers",marker:{color:b[S].color,size:10+5*S,line:{color:"white"},opacity:.7},cliponaxis:!1};k.push(E)}for(var N=0;N<n.length;N++)for(var W=1;W<n[N].r.length;W++){var A=n[N].r[W]/o[N].r[W];A>.2?(k[0].r.push(N),k[0].theta.push(x[W])):A>.15?(k[1].r.push(N),k[1].theta.push(x[W])):A>.1?(k[2].r.push(N),k[2].theta.push(x[W])):(k[3].r.push(N),k[3].theta.push(x[W]))}var O={cbpf:k.reverse(),cpf:{high:{r:y,theta:x,type:"scatterpolar",fill:"toself",name:"High"},all:{r:v,theta:x,type:"scatterpolar",fill:"toself",name:"All"}}};return O}function n(e){for(var t,r,a,l,i=[{d:"N",lower:348.75,upper:11.25},{d:"NNE",lower:11.25,upper:33.75},{d:"NE",lower:33.75,upper:56.25},{d:"ENE",lower:56.25,upper:78.75},{d:"E",lower:78.75,upper:101.25},{d:"ESE",lower:101.25,upper:123.75},{d:"SE",lower:123.75,upper:146.25},{d:"SSE",lower:146.25,upper:168.75},{d:"S",lower:168.75,upper:191.25},{d:"SSW",lower:191.25,upper:213.75},{d:"SW",lower:213.75,upper:236.25},{d:"WSW",lower:236.25,upper:258.75},{d:"W",lower:258.75,upper:281.25},{d:"WNS",lower:281.25,upper:303.75},{d:"NW",lower:303.75,upper:326.25},{d:"NNW",lower:326.25,upper:348.75}],n=0,o=[{text:"Calm",speed:2,legend:"<2 m/s",color:"#062CFB",r:Array(16).fill(0)},{text:"Light air",speed:6,legend:"2-6 m/s",color:"#17D3FF",r:Array(16).fill(0)},{text:"Light breeze",speed:12,legend:"6-12 m/s",color:"#7DFE7A",r:Array(16).fill(0)},{text:"Gentle breeze",speed:19,legend:"12-19 m/s",color:"#FFE50D",r:Array(16).fill(0)},{text:"Moderate breeze",speed:30,legend:"19-30 m/s",color:"#FFE50D",r:Array(16).fill(0)},{text:"Fresh",speed:40,legend:"30-40 m/s",color:"#810006",r:Array(16).fill(0)},{text:"strong",speed:100,legend:">40 m/s",color:"#810006",r:Array(16).fill(0)}],s=0;s<e.length;s++)if(t=e[s].wind_direction,r=e[s].wind_speed,null!==t&&null!==r){if(n+=1,t>348.75)a=0;else for(var u=1;u<i.length;u++)if(t<=i[u].upper){a=u;break}for(var c=0;c<o.length;c++)if(r<=o[c].speed){l=c;break}o[l].r[a]+=1}for(var h=0;h<i.length;h++)for(var d=1;d<o.length;d++)o[d].r[h]>0&&(o[d].r[h]+=o[d-1].r[h]);for(var p=[],f=0;f<o.length;f++)p.push({r:o[f].r.map((function(e){return Math.round(e/n*100*100)/100})),theta:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNS","NW","NNW"],name:o[f].legend,marker:{color:o[f].color},type:"barpolar"});return p.reverse()}function o(){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function h(e,t){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var a,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(l in a=t,r)a=a.filter((function(e){return r[l].includes(e[l])}));return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e,t){var r=e;for(var a in t)r=r.filter((function(e){return t[a].includes(e[a])}));return r}function f(){}function g(e,t){function r(e){var t=e.length,r=e.reduce((function(e,t){return e+t}))/t;return e.map((function(e){return(e-r)*(e-r)})).reduce((function(e,t){return e+t}))/t}for(var a=e.reduce((function(e,r){var a,l=r.x.getFullYear(),i=r.x.getMonth()+1,n=r.x.getDate(),o=r.x.getHours();switch(t){case"hourly":a=l+"-"+i+"-"+n+" "+o;break;case"daily":a=l+"-"+i+"-"+n;break;case"monthly":a=l+"-"+i;break;case"yearly":a=l;break}return null!==r.y&&(e.date.includes(a)?(e[a].sum+=r.y,e[a].count+=1,e[a].value.push(r.y)):(e.date.push(a),e[a]={sum:0,count:0,value:[]},e[a].sum=r.y,e[a].count=1,e[a].value.push(r.y))),e}),{date:[]}),l=[],i=[],n=[],o=0;o<a.date.length;o++)l.push(new Date(a.date[o])),i.push(a[a.date[o]].sum/a[a.date[o]].count),n.push(r(a[a.date[o]].value));return{x:l,y:i,deviation:n}}function m(e){var t=e.length,r=e.reduce((function(e,t){return e+t}))/t;return Math.sqrt(e.map((function(e){return Math.pow(e-r,2)})).reduce((function(e,t){return e+t}))/t)}function y(e,t){for(var r={},a=e.length,l=0,i=0,n=0,o=0,s=0,u=0;u<e.length;u++)l+=t[u],i+=e[u],n+=t[u]*e[u],o+=t[u]*t[u],s+=e[u]*e[u];r["slope"]=(a*n-l*i)/(a*o-l*l),r["intercept"]=(i-r.slope*l)/a,r["r2"]=Math.pow((a*n-l*i)/Math.sqrt((a*o-l*l)*(a*s-i*i)),2);var c=Math.min.apply(null,t),h=Math.max.apply(null,t);return r["line"]={x1:c,y1:c*r.slope+r.intercept,x2:h,y2:h*r.slope+r.intercept},r}t["a"]={linearRegression:y,getStandardDeviation:m,cal_period_avg:g,sen_slope:f,data_filter:h,data_reduce:o,data_merge:u,data_cal_windrose:n,data_filter_2:p,data_cal_cpf:i,data_cal_pscf:l}}}]);
//# sourceMappingURL=chunk-7201d0ea.1bf1dc2e.js.map