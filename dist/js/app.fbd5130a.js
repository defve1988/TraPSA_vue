(function(e){function t(t){for(var n,a,c=t[0],s=t[1],u=t[2],l=0,_=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&_.push(i[a][0]),i[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);h&&h(t);while(_.length)_.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,a=1;a<r.length;a++){var c=r[a];0!==i[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i={app:0},o=[];function c(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-014ab019":"c22d5f28","chunk-885c58b4":"962fb831","chunk-0ccba2ce":"d7f8c9e3","chunk-1a89e31a":"69c43bfa","chunk-b662cce6":"8fccc80a","chunk-2ad8f6c0":"e3e967a5","chunk-2d21e222":"b713cb7c","chunk-351f46d4":"1fd70971","chunk-36f4750a":"ebd7a07b","chunk-41a5c5c0":"bfc80fa7","chunk-aba4b592":"f721b158","chunk-cf29cd7c":"d13e1249","chunk-08427e60":"dfca1c4b","chunk-c02da82e":"b53e2345","chunk-ea360e3e":"7e6698f9","chunk-01e38d62":"29d7b68b","chunk-66a6b2a1":"387d89a9","chunk-e437faa0":"5cf2e30f","chunk-5d19472e":"329713e0","chunk-9d303fce":"a32c66a0","chunk-05386022":"2496a948","chunk-48f4d35d":"7904f2a8"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r={"chunk-014ab019":1,"chunk-885c58b4":1,"chunk-0ccba2ce":1,"chunk-1a89e31a":1,"chunk-b662cce6":1,"chunk-2ad8f6c0":1,"chunk-36f4750a":1,"chunk-aba4b592":1,"chunk-cf29cd7c":1,"chunk-08427e60":1,"chunk-c02da82e":1,"chunk-ea360e3e":1,"chunk-66a6b2a1":1,"chunk-e437faa0":1,"chunk-5d19472e":1,"chunk-9d303fce":1,"chunk-05386022":1,"chunk-48f4d35d":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-014ab019":"d07ae3e6","chunk-885c58b4":"06d1d661","chunk-0ccba2ce":"2cef8eab","chunk-1a89e31a":"54e96dfc","chunk-b662cce6":"05748932","chunk-2ad8f6c0":"7fd1dea6","chunk-2d21e222":"31d6cfe0","chunk-351f46d4":"31d6cfe0","chunk-36f4750a":"bdc72f73","chunk-41a5c5c0":"31d6cfe0","chunk-aba4b592":"b532d57f","chunk-cf29cd7c":"4e0080e4","chunk-08427e60":"d69ccb40","chunk-c02da82e":"c56e0190","chunk-ea360e3e":"43e50ce8","chunk-01e38d62":"31d6cfe0","chunk-66a6b2a1":"6b9ecb11","chunk-e437faa0":"d5d4f1f7","chunk-5d19472e":"d1cfdf06","chunk-9d303fce":"146070ed","chunk-05386022":"33ac40b1","chunk-48f4d35d":"fbb1ffd0"}[e]+".css",i=s.p+n,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===i))return t()}var _=document.getElementsByTagName("style");for(c=0;c<_.length;c++){u=_[c],l=u.getAttribute("data-href");if(l===n||l===i)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var n=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete a[e],h.parentNode.removeChild(h),r(o)},h.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(h)})).then((function(){a[e]=0})));var n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var _=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(h);var r=i[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;_.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",_.name="ChunkLoadError",_.type=n,_.request=a,r[1](_)}i[e]=void 0}};var h=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var _=0;_<u.length;_++)t(u[_]);var h=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"05d3":function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));r("99af"),r("4de4"),r("4160"),r("caad"),r("d81d"),r("4fad"),r("2532"),r("159b");var n=r("3835"),a=(r("96cf"),r("1da1")),i=r("d4ec"),o=r("bee2"),c=r("262e"),s=r("2caf"),u=(r("d3b7"),r("ac1f"),r("1276"),r("498a"),r("5698")),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Object(i["a"])(this,e),this.df=t,""!==r){var n=r.split(".").pop();"csv"==n&&this.fetch_csv(r),"json"==n&&this.fetch_json(r)}}return Object(o["a"])(e,[{key:"fetch_json",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,u["h"](t);case 3:if(n=e.sent,!r){e.next=8;break}this.df=this.df.concat(n),e.next=9;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetch_csv",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,u["b"](t);case 3:if(n=e.sent,!r){e.next=8;break}this.df=this.df.concat(n),e.next=9;break;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"load_json",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!(a.length>1&&void 0!==a[1])||a[1],e.next=3,this.readFileAsync(t);case 3:if(n=e.sent,!r){e.next=8;break}this.df=this.df.concat(JSON.parse(n)),e.next=9;break;case 8:return e.abrupt("return",JSON.parse(n));case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"load_csv",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=!(i.length>1&&void 0!==i[1])||i[1],e.next=3,this.readFileAsync(t);case 3:return n=e.sent,e.next=6,this.convert_csv(n);case 6:if(a=e.sent,!r){e.next=11;break}this.df=this.df.concat(a),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"readFileAsync",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=r,n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"convert_csv",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=t.split("\n"),n=[],a=r[0].trim().split(",").filter((function(e){return e.trim().length>0})),a=a.map((function(e){return e.toLowerCase().trim()})),i=1;i<r.length;i++)if(o=r[i].split(",").filter((function(e){return e.trim().length>0})),o.length==a.length){for(s in c={},a)c[a[s]]=o[s].trim();n.push(c)}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),_=function(e){Object(c["a"])(r,e);var t=Object(s["a"])(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(i["a"])(this,r),t.call(this,e,n)}return Object(o["a"])(r,[{key:"concat",value:function(e){this.df=this.df.concat(e)}},{key:"merge",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.forEach((function(e){var i=[],o=a.df.filter((function(e,n){var a=!0;return r.forEach((function(r){a=a&&e[r]==t[r]})),a&&i.push(n),a}));0==o.length?a.df.push(e):o.forEach((function(t){for(var r=0,i=Object.entries(e);r<i.length;r++){var o=Object(n["a"])(i[r],2),c=o[0],s=o[1];null!=s&&(a.df[t][c]=s)}}))}));case 1:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"rename_attr",value:function(e,t){e!=t&&(this.df=this.df.map((function(r){return void 0!=r[e]&&(r[t]=r[e],delete r[e]),r})),this.get_attr())}},{key:"replace",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.df=this.df.map((function(e){for(var a=e,i=0,o=Object.entries(e);i<o.length;i++){var c=Object(n["a"])(o[i],2),s=c[0],u=c[1];u==t&&(e[s]=r)}return a}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"replace_missing",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:null,null==t&&(t=["","NaN","nan"]),this.df=this.df.map((function(e){for(var r=e,a=0,i=Object.entries(e);a<i.length;a++){var o=Object(n["a"])(i[a],2),c=o[0],s=o[1];t.includes(s)&&(e[c]=null)}return r}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"table2list",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){var i,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]?c[3]:this.df,o=[],i.forEach((function(e){for(var i=0,c=Object.entries(e);i<c.length;i++){var s=Object(n["a"])(c[i],2),u=s[0],l=s[1];if(!t.includes(u)){var _={};t.forEach((function(t){return _[t]=e[t]})),_[r]=u,_[a]=l,o.push(_)}}})),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()}]),r}(l)},1:function(e,t){},2:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t),r.d(t,"base",(function(){return Ae}));r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-layout",{staticClass:"justify-center"},[r("v-col",{attrs:{lg:"9"}},[r("v-card",{attrs:{color:"secondary",height:"100%",loading:e.ui_control.isLoading}},[r("v-card-title",{staticClass:"justify-left py-2 px-0 pr-5"},[r("v-img",{staticClass:"img_logo",attrs:{src:"logo.png",height:"100",width:"100",contain:"",ele:""}}),r("v-spacer"),r("v-btn",{staticClass:"ml-5 mt-10",attrs:{color:"primary lighten-2"},on:{click:e.open_section}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-folder-open")]),e._v("Open Section ")],1),r("v-btn",{staticClass:"ml-5 mt-10",attrs:{color:"primary lighten-2"},on:{click:e.save_section}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-download")]),e._v("Save Section ")],1),r("v-btn",{staticClass:"ml-5 mt-10",attrs:{color:"primary lighten-2"},on:{click:function(t){e.ui_control.data_view=!0}}},[r("v-icon",{attrs:{left:""}},[e._v("mdi-table-multiple")]),e._v("Data Summary ")],1),r("input",{ref:"open_section",staticClass:"d-none",attrs:{type:"file",accept:".trapsa"},on:{change:e.upload_section}})],1),r("v-divider"),r("v-tabs",{attrs:{"background-color":"transparent",color:"primary",grow:"",height:"45px","slider-color":"primary"},model:{value:e.ui_control.curr_tab,callback:function(t){e.$set(e.ui_control,"curr_tab",t)},expression:"ui_control.curr_tab"}},e._l(e.tabs,(function(t){return r("v-tab",{key:t.index},[r("v-avatar",[r("v-icon",{attrs:{color:e.ui_control.curr_tab===t.index?"primary":""}},[e._v(e._s(t.icon))])],1),e._v(" "+e._s(t.name)+" ")],1)})),1),r("v-tabs-items",{model:{value:e.ui_control.curr_tab,callback:function(t){e.$set(e.ui_control,"curr_tab",t)},expression:"ui_control.curr_tab"}},[r("v-tab-item",[r("About")],1),r("v-tab-item",[r("Upload")],1),r("v-tab-item",[r("Trajectory")],1),r("v-tab-item",[r("Analysis")],1),r("v-tab-item",[r("Source")],1)],1)],1)],1)],1),r("v-footer",{attrs:{height:"30"}},[r("span",{staticClass:"primary--text caption"},[e._v("Chuanlong Zhou © 2020-2021, Center for Air and Aquatic Resources Engineering and Sciences ("),r("a",{attrs:{href:"https://www.clarkson.edu/caares"}},[e._v("CAARES")]),e._v(") ")])]),r("Message"),r("MetedataDialog"),r("MeteDataRequired"),r("v-dialog",{attrs:{width:"1000"},model:{value:e.ui_control.data_view,callback:function(t){e.$set(e.ui_control,"data_view",t)},expression:"ui_control.data_view"}},[r("DataView")],1)],1)},i=[],o=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf"),r("1da1")),c=r("5530"),s=r("2f62"),u={name:"App",components:{About:function(){return r.e("chunk-cf29cd7c").then(r.bind(null,"ed0f"))},Source:function(){return r.e("chunk-351f46d4").then(r.bind(null,"5a8b"))},Trajectory:function(){return Promise.all([r.e("chunk-014ab019"),r.e("chunk-885c58b4"),r.e("chunk-2ad8f6c0")]).then(r.bind(null,"5498"))},Analysis:function(){return Promise.all([r.e("chunk-885c58b4"),r.e("chunk-aba4b592")]).then(r.bind(null,"5706"))},Upload:function(){return Promise.all([r.e("chunk-014ab019"),r.e("chunk-885c58b4"),r.e("chunk-0ccba2ce"),r.e("chunk-1a89e31a")]).then(r.bind(null,"2300"))},Message:function(){return r.e("chunk-36f4750a").then(r.bind(null,"e987"))},MetedataDialog:function(){return r.e("chunk-2d21e222").then(r.bind(null,"d3eb"))},MeteDataRequired:function(){return r.e("chunk-41a5c5c0").then(r.bind(null,"7405"))},DataView:function(){return Promise.all([r.e("chunk-014ab019"),r.e("chunk-885c58b4"),r.e("chunk-0ccba2ce"),r.e("chunk-b662cce6")]).then(r.bind(null,"6eec"))}},computed:Object(c["a"])({},Object(s["c"])({app_data:"app_data",ui_control:"ui_control"})),mounted:function(){},data:function(){return{tab_height:"800px",tabs:[{name:"Introduction",icon:"mdi-information",index:0},{name:"Upload Data",icon:"mdi-arrow-up-bold-circle",index:1},{name:"Trajectory",icon:"mdi-earth",index:2},{name:"Basic Analysis",icon:"mdi-chart-bar",index:3},{name:"Potential Sources",icon:"mdi-hexagon-multiple",index:4}]}},methods:Object(c["a"])(Object(c["a"])({},Object(s["b"])(["OPENSECTION","OPENSECTION_UI"])),{},{test:function(){this.ui_control.data_view=!0},save_section:function(){var e=this;this.ui_control.isLoading="primary",this.$worker.run((function(e){return new Blob([e],{type:"application/json"})}),['{"app_data":'+JSON.stringify(this.app_data)+',"ui_control":'+JSON.stringify(this.ui_control)+"}"]).then((function(t){var r=document.createElement("a"),n=URL.createObjectURL(t),a=(new Date).getMonth()+1,i=(new Date).getFullYear()+("0"+a).substr(-2)+(new Date).getDate()+".trapsa";r.href=n,r.setAttribute("download",i),r.click(),e.ui_control.isLoading=!1,e.ui_control.snackbar={show:!0,text:"Current section is saved!",color:"info"}}))},open_section:function(){this.$refs.open_section.click()},upload_section:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.ui_control.isLoading="primary",r.next=3,t.readFileAsync(e.target.files[0]).then((function(e){t.OPENSECTION(JSON.parse(e)["app_data"]),t.OPENSECTION_UI(JSON.parse(e)["ui_control"]),t.ui_control.snackbar={show:!0,text:"Your previous section is loaded!",color:"info"},t.ui_control.isLoading=!1}));case 3:case"end":return r.stop()}}),r)})))()},readFileAsync:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){var n=new FileReader;n.onload=function(){t(n.result)},n.onerror=r,n.readAsText(e)})));case 1:case"end":return t.stop()}}),t)})))()}})},l=u,_=(r("5c0b"),r("2877")),h=r("6544"),d=r.n(h),f=r("7496"),p=r("8212"),m=r("8336"),b=r("b0af"),g=r("99d9"),v=r("62ad"),y=r("169a"),k=r("ce7e"),w=r("553a3"),x=r("132d"),O=r("adda"),E=r("a722"),j=r("2fa4"),D=r("71a3"),M=r("c671"),P=r("fe57"),A=r("aac8"),R=Object(_["a"])(l,a,i,!1,null,null,null),C=R.exports;d()(R,{VApp:f["a"],VAvatar:p["a"],VBtn:m["a"],VCard:b["a"],VCardTitle:g["c"],VCol:v["a"],VDialog:y["a"],VDivider:k["a"],VFooter:w["a"],VIcon:x["a"],VImg:O["a"],VLayout:E["a"],VSpacer:j["a"],VTab:D["a"],VTabItem:M["a"],VTabs:P["a"],VTabsItems:A["a"]});var T=r("8c4f");n["a"].use(T["a"]);var S=[],L=new T["a"]({mode:"history",base:"/",routes:S}),N=L,W=(r("4de4"),r("4160"),r("caad"),r("13d5"),r("b0c0"),r("159b"),r("db8d")),I={missing_data:"-999,NaN,,",sites:new W["a"],conc_df:new W["a"],traj_data:[],upload_files:[],parameters:{dialog_show:!1,model:"PSCF",cpf:.9,cbpf:.9,pscf:.8,grid_size:1,traj_job:"",weight:[{n:.25,w:.1},{n:.5,w:.25},{n:.75,w:.5},{n:1,w:.75},{n:1.5,w:.9}]},curr_job:{csv_file:"",job_name:"",start_point:[{time_stamp:null,site_name:null,traj_time_stamp:null}],trajectory_time:null,height:null,kmsl:null,working_folder:"",mete_folder:"",mete_type:""},measurement:{header:[{text:"timestamp",value:"timestamp"},{text:"site_name",value:"site_name"},{text:"chemical_1",value:"chemical_1"},{text:"chemical_2",value:"chemical_2"},{text:"..."}],data:[]},wind_data:{header:[{text:"timestamp",value:"timestamp"},{text:"site_name",value:"site_name"},{text:"wind_speed",value:"wind_speed"},{text:"wind_direction",value:"wind_direction"}],data:[]},site_summary:[],case:[],source_case:[],map_layers:[{name:"111"},{name:"222"},{name:"333"}]},U={},B={},z={OPENSECTION:function(e,t){var r=["sites","conc_df"];for(var n in t)r.includes(n)?(e[n].df=t[n].df,e[n].attrs=t[n].attrs,e[n].table_header=t[n].table_header):"traj_data"==n?t[n].forEach((function(t){var r={job_name:t.job_name,df:new W["a"]};r.df=t.df,e[n].push(r)})):e[n]="upload_files"==n?[]:t[n]},SITESUMMARY:function(e){var t=[],r=["site_name","time_stamp"],n=["wind_direction","wind_speed"];e.sites.df.forEach((function(a){var i=a.site_name,o=e.conc_df.df.filter((function(e){return e.site_name==i})),c={},s=e.conc_df.attrs,u=[];for(var l in s){var _=s[l];r.includes(_.toLowerCase())||n.includes(_.toLowerCase())||(c[_]={name:_,record:null,missing:null,mean:0,max:-9999,min:9999},u.push(_))}var h=o.reduce((function(e,t){for(var r in u){var n=u[r],a=parseFloat(t[n]);isNaN(a)?e[n].missing+=1:(e[n].record+=1,e[n].mean+=a,a>e[n].max&&(e[n].max=a),a<e[n].min&&(e[n].min=a))}return e}),c);for(var d in h)h[d].mean=h[d].mean/h[d].record;var f={record:0,missing:0};f=o.reduce((function(e,t){return null!=t["wind_speed"]&&null!=t["wind_direction"]?e.record+=1:e.missing+=1,e}),f);var p={num:0,jobs:[]};e.traj_data.forEach((function(e){var t=e.df.filter((function(e){return e.site_name==i}));t.length>0&&(p.num+=1,p.jobs.push(e.job_name))}));var m={site_name:i,location:[a.lat,a.lon],chemicals:h,wind:f,traj:p};t.push(m)})),e.site_summary=t},UPDATE_DATA:function(e,t){e[t.name]=t.data},MERGE_DATA:function(){}},K={state:I,getters:U,actions:B,mutations:z},F={curr_tab:0,mete_dialog:!1,data_view:!1,snackbar:{show:!0,text:"Thanks for using TraPSA!",color:"info"},mete_required:{show:!1,items:[]},system_bar_class:"py-1 px-2 primary lighten-4",column_import:[{name:"Imported Columns",cols:"3",var:[]},{name:"Timestamp",cols:"3",var:[]},{name:"Site Name",cols:"3",var:[]},{name:"Measurements",cols:"3",var:[]},{name:"Wind Direction",cols:"3",var:[]},{name:"Wind Speed",cols:"3",var:[]}],column_select:{show:!0},isLoading:!1,map_loading:!1,new_case:{show:!1,edit:-1,selection:{case_name:"New Case",site:[],chemical:[],year:[],month:["Spring","Summer","Autumn","Winter"],hour:["Morning rush hours (6:00-9:00)","Daytime hours (10:00-16:00)","Afternoon rush hours (15:00-20:00)","Night hours (21:00-5:00)"]}},thumb_fig_index:"",source_case_index:"",fig_view:{show:!1,id:"",selected_case_name:[],text:""},dateformat:{show:!1,text:[{}]},new_source_layer:{show:!1,eidt:-1},hysplit:{working:"C:\\Users\\zhouc\\Desktop\\GitHub\\TraPSA_vue_2\\data\\HYSPLIT",job_name:"new_job",sites:[],start_time:{isExpand:!1,sample_period:null,expand_number:null},height_type:["Height above ground","Relative to mean sea level","Fraction of the mixed layer"],start_height:{value_type:"Height above ground",value:500},trajectory_time:-24,mete:{type:"NCEP/NCAR",path:"C:\\Users\\zhouc\\Desktop\\GitHub\\TraPSA_vue_2\\data\\GBL"},mete_types:["NCEP/NCAR","GDAS1","GDAS0p5","EDAS40","NARR"]}},q={},V={},G={OPENSECTION_UI:function(e,t){for(var r in t)e[r]=t[r]}},H={state:F,getters:q,actions:V,mutations:G},Y=r("d4ec"),J=r("bee2"),$=(r("99af"),r("cb29"),r("257e")),Z=r("262e"),Q=r("2caf"),X=r("ade3"),ee=(r("a630"),r("d81d"),r("4fad"),r("3835")),te=r("030a"),re=r.n(te),ne=(r("b64b"),r("53ca"));function ae(e,t){Object.keys(t).forEach((function(r){"object"!=Object(ne["a"])(t[r])||void 0==e[r]?Object.assign(e,Object(X["a"])({},r,t[r])):ae(e[r],t[r])}))}var ie={deep_merge:ae},oe=function(){function e(t,r){Object(Y["a"])(this,e),Object(X["a"])(this,"config",{displaylogo:!1,responsive:!0,displayModeBar:!1,staticPlot:!1,editable:!1,mapboxAccessToken:"pk.eyJ1IjoiZGVmdmUxOTg4IiwiYSI6ImNrNzNzZmN3dzBmMnMzZ3FvMzJ0MDRpa2QifQ.xLG4lim5AonGbkDtgP9-5A"}),Object(X["a"])(this,"layout",{width:200,height:200,autosize:!0,margin:{r:0,t:0,b:0,l:0},title:"",xaxis:{title:"",titlefont:{size:10,family:"",color:"black"},showticklabels:!0,showline:!0,showgrid:!0,zeroline:!0,autotick:!0},yaxis:{title:"",titlefont:{size:10,family:"",color:"black"},showticklabels:!0,showline:!0,showgrid:!0,zeroline:!0,autotick:!0},font:{size:14,family:"",color:"black"},showlegend:!1,legend:{font:{size:10,family:"",color:"black"},xanchor:"auto",yanchor:"auto",x:1,y:0},coloraxis:{colorscale:"hot",reversescale:!1,colorbar:{xanchor:"right",yanchor:"top",x:1,y:1,len:.3}},dragmode:"zoom",bargap:.05,bargroupgap:.2,barmode:"overlay",mapbox:{style:"light",center:{lat:0,lon:0},zoom:2}}),this.div=t,this.fig_type=r,this.trace=[]}return Object(J["a"])(e,[{key:"hex2rgba",value:function(e,t){e=e.substring(1),3===e.length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]));var r=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16);return"rgba(".concat(r,",").concat(n,",").concat(a,",").concat(t,")")}},{key:"set_trace",value:function(e){this.trace=this.trace.concat(e)}},{key:"plot_new",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.trace,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var n=[];e.forEach((function(e){for(var t={},a=0,i=Object.entries(e);a<i.length;a++){var o=Object(ee["a"])(i[a],2),c=o[0],s=o[1];t[c]=s}r&&(t.x=t.x.map((function(e){return null==e?null:0}))),t.y=t.y.map((function(e){return null==e?null:0})),n.push(t)})),re.a.newPlot(this.div,n,this.layout,this.config),re.a.animate(this.div,{data:e,traces:Array.from(Array(e.length).keys())},{transition:{duration:1e3,easing:"cubic-in-out"}})}else re.a.newPlot(this.div,e,this.layout,this.config)}},{key:"add_trace",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.trace,e.abrupt("return",re.a.addTraces(this.div,t));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"set_layout",value:function(e){ie.deep_merge(this.layout,e)}},{key:"set_config",value:function(e){ie.deep_merge(this.config,e)}},{key:"update_layout",value:function(){re.a.relayout(this.div,this.layout)}},{key:"update_style",value:function(e){re.a.restyle(this.div,e)}},{key:"clear_image",value:function(){re.a.purge(this.div)}},{key:"save_image",value:function(e){re.a.toImage(this.div,{format:"png",height:800,width:1200}).then((function(t){var r=document.createElement("a");r.href=t,r.setAttribute("download",e+".png"),r.click()}))}},{key:"del_trace",value:function(e){re.a.deleteTraces(this.div,e)}},{key:"set_fig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.fig_type;switch(e){case"thumb":this.config.staticPlot=!0,this.layout.showlegend=!1,this.layout.xaxis.showticklabels=!1,this.layout.yaxis.showticklabels=!1,this.layout.xaxis.zeroline=!1,this.layout.height=180,this.layout.width=300,this.layout.margin={r:20,t:25,b:25,l:20};break;case"small":this.config.staticPlot=!0,this.layout.showlegend=!1,this.layout.xaxis.showticklabels=!1,this.layout.yaxis.showticklabels=!1,this.layout.xaxis.zeroline=!1,this.layout.height=180,this.layout.width=300,this.layout.margin={r:20,t:25,b:25,l:20};break;case"meduim":this.layout.height=400,this.layout.width=800,this.layout.margin={r:20,t:50,b:25,l:20};break;case"large":this.config.editable=!0,this.layout.height=600,this.layout.width=1200,this.layout.margin={r:100,t:50,b:75,l:125};break}}}]),e}(),ce=function(e){Object(Z["a"])(r,e);var t=Object(Q["a"])(r);function r(e,n,a){var i;return Object(Y["a"])(this,r),i=t.call(this,e,n),Object(X["a"])(Object($["a"])(i),"color_theme",["#1E88E5","#28965A","#E53E20","#7CB342","#d95282","#FBC02D","#00B8DC","#232322","#AAAAAA"]),i.plot_type=a,i.set_fig(),i}return Object(J["a"])(r,[{key:"set_trace_func",value:function(){switch(this.plot_type){case"wind_rose":this.gen_trace=this.gen_wind_rose;break;case"hist":this.gen_trace=this.gen_hist;break}}},{key:"gen_hist",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,a=[];e.forEach((function(e){var i=Math.floor(Math.random()*Math.floor(8));a.push({x:e.x,name:e.y_name,xbins:{end:t,start:0,size:t/n},autobinx:!0,histnorm:"counts",marker:{color:r.hex2rgba(r.color_theme[i],.5),line:{color:r.hex2rgba(r.color_theme[i],1),width:.5}},opacity:.8,type:"histogram"})})),this.trace=a,this.plot_new()}},{key:"gen_scatter",value:function(e){var t=this,r=[];e.forEach((function(e){var n=Math.floor(Math.random()*Math.floor(8));r.push({x:e.x,y:e.y,text:e.text,type:"scatter",mode:"markers",name:e.y_name,marker:{size:6,color:t.hex2rgba(t.color_theme[n],.8)}})})),this.trace=r,this.plot_new()}},{key:"gen_bar",value:function(e){var t=this,r=[];e.forEach((function(e){var n=Math.floor(Math.random()*Math.floor(8));r.push({x:e.x,y:e.y,type:"bar",marker:{color:t.hex2rgba(t.color_theme[n],.5),line:{color:t.hex2rgba(t.color_theme[n],1),width:.5}}})})),this.trace=r,this.plot_new()}},{key:"gen_line",value:function(){}},{key:"gen_wind_rose",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=["North","NNE","NE","ENE","East","ESE","SE","SSE","South","SSW","SW","WSW","West","WNS","NW","NNW"],a=[];return a=null==e?[{r:new Array(16).fill(0),theta:n,type:"barpolar"}]:e,this.layout.polar={barmode:"overlay",bargap:0,radialaxis:{ticksuffix:"%",angle:45,dtick:5},angularaxis:{direction:"clockwise"}},t&&(this.trace=this.trace.concat(a)),r&&this.plot_new(),console.log(a),a}}]),r}(oe),se=r("7909"),ue={color:"rgb(0, 150, 100)",size:12,opacity:.5},le=function(e){Object(Z["a"])(r,e);var t=Object(Q["a"])(r);function r(e,n){var a;return Object(Y["a"])(this,r),a=t.call(this,e,n),Object(X["a"])(Object($["a"])(a),"color_theme",["#1E88E5","#28965A","#E53E20","#7CB342","#d95282","#FBC02D","#00B8DC","#232322","#AAAAAA"]),a.clear_image(),a}return Object(J["a"])(r,[{key:"gen_dots",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:null,n=c.length>2&&void 0!==c[2]?c[2]:null,a=!(c.length>3&&void 0!==c[3])||c[3],i=!(c.length>4&&void 0!==c[4])||c[4],null==r&&(r=ue),o=[{type:"scattermapbox",text:t.text,lon:t.lon,lat:t.lat,hovertemplate:"%{text}<br>%{lat:.2f}, %{lon:.2f}<extra></extra>",hoverlabel:{bgcolor:"rgba(70,70,70,1)"},marker:r}],null!=n&&(o=o.map((function(e){return e.mode="markers+text",e.textposition=n,e}))),t.lon.length>0&&(this.layout.mapbox.zoom=4,this.layout.mapbox.center={lat:Object(se["c"])(t.lat),lon:Object(se["c"])(t.lon)}),a&&(this.trace=this.trace.concat(o)),i&&this.plot_new(),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"plot_map_scatter",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=!(a.length>1&&void 0!==a[1])||a[1],n=[],n=[{type:"scattermapbox",name:t.map((function(e){return e.name})),text:t.map((function(e){return e.text})),lon:t.map((function(e){return e.lon})),lat:t.map((function(e){return e.lat})),hovertemplate:"%{text}<br>%{lat:.2f}, %{lon:.2f}<extra></extra>",hoverlabel:{bgcolor:"rgba(70,70,70,1)"},marker:{color:t.map((function(e){return e.color})),size:t.map((function(e){return e.size})),opacity:t.map((function(e){return e.op}))},showlegend:!1}],r?(this.trace=n,this.add_trace(),this.del_trace(0)):(this.trace=this.trace.concat(n),this.plot_new());case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"plot_heat_map",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:15,n=a.length>2&&void 0!==a[2]?a[2]:.8,t=[{type:"densitymapbox",lon:t.lon,lat:t.lat,z:t.z,coloraxis:"coloraxis",radius:r,opacity:n}],e.abrupt("return",this.add_trace(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(oe),_e=(r("fb6a"),r("ac1f"),r("5319"),r("5698")),he=r("b9b9"),de=r.n(he),fe=function(){function e(t){Object(Y["a"])(this,e),this.plot_config=t,this.div=this.plot_config.div,this.layout=this.plot_config.layout,this.svg=null,this.ticker=null}return Object(J["a"])(e,[{key:"gen_dataSlice",value:function(e){var t=this.race_data.filter((function(t){return t.date==e&&!isNaN(t.value)})).sort((function(e,t){return t.value-e.value})).slice(0,this.top_n);return t.forEach((function(e,t){return e.rank=t})),t}},{key:"gene_race_data",value:function(e,t,r){var n=[],a={};return e.forEach((function(e){a[e.country]=_e["e"](360*Math.random(),.75,.75)})),e.forEach((function(e){e.location.forEach((function(i){var o=i.name;t.forEach((function(i,c){if(r in e.data[o]){var s,u=0==c?i:t[c-1];s="tot"==o?e.country:"US"!=e.country?o+", "+e.country:o,n.push({value:e.data[o][r][i],lastValue:e.data[o][r][u],date:i,name:s,colour:a[e.country]})}}))}))})),n}},{key:"restart_race",value:function(){this.update_ticker()}},{key:"stop_race",value:function(){this.ticker.stop()}},{key:"init_race",value:function(e,t,r){var n=this;this.date_list=t,this.col=r,this.top_n=this.layout.top_n,this.width=this.layout.width,this.height=this.layout.height,this.margin=this.layout.margin,this.tickDuration=this.layout.tickDuration,this.barPadding=(this.height-(this.margin.bottom+this.margin.top))/(5*this.top_n),this.ticker=null,null!=this.svg?(console.log(this.svg),this.svg.selectAll("*").remove()):this.svg=_e["k"](this.div).append("svg").attr("width",this.width).attr("height",this.height),this.race_data=this.gene_race_data(e,t,r),this.date_index=0,this.date=t[this.date_index];var a=this.gen_dataSlice(this.date);this.x=_e["j"]().domain([0,_e["i"](a,(function(e){return e.value}))]).range([this.margin.left,this.width-this.margin.right-65]),this.y=_e["j"]().domain([this.top_n,0]).range([this.height-this.margin.bottom,this.margin.top]),this.xAxis=_e["a"]().scale(this.x).ticks(this.width>500?5:2).tickSize(-(this.height-this.margin.top-this.margin.bottom)).tickFormat((function(e){return _e["d"](",")(e)})),this.svg.append("g").attr("class","axis xAxis").attr("transform","translate(0, ".concat(this.margin.top,")")).call(this.xAxis).selectAll(".tick line").classed("origin",(function(e){return 0==e})),this.svg.selectAll("rect.bar").data(a,(function(e){return e.name})).enter().append("rect").attr("class","bar").attr("x",this.x(0)+1).attr("width",(function(e){return n.x(e.value)-n.x(0)})).attr("y",(function(e){return n.y(e.rank)+5})).attr("height",this.y(1)-this.y(0)-this.barPadding).style("fill",(function(e){return e.colour})),this.svg.selectAll("text.label").data(a,(function(e){return e.name})).enter().append("text").attr("class","label").attr("x",(function(e){return n.x(e.value)+5})).attr("y",(function(e){return n.y(e.rank)+(n.y(1)-n.y(0))/2+9})).style("text-anchor","start").html((function(e){return e.name})).style("fill",(function(e){return e.colour})),this.svg.selectAll("text.valueLabel").data(a,(function(e){return e.name})).enter().append("text").attr("class","valueLabel").attr("x",(function(){return n.x(0)+5})).attr("y",(function(e){return n.y(e.rank)+(n.y(1)-n.y(0))/2+9})).style("text-anchor","end").text((function(e){return _e["d"](",.0f")(e.lastValue)})).style("fill","grey"),this.svg.append("rect").attr("x",this.width-this.margin.right-195).attr("y",this.height-50).attr("width",150).attr("height",35).style("fill","#424242"),this.dateText=this.svg.append("text").attr("x",this.width-this.margin.right-50).attr("y",this.height-25).style("text-anchor","end").style("font-size","25px").attr("font-weight",800).style("fill","white").text(de()(new Date(this.date),"yyyy-mm-dd")),this.update_ticker()}},{key:"update_ticker",value:function(){function e(){var e=t.gen_dataSlice(t.date);t.x.domain([0,_e["i"](e,(function(e){return e.value}))]),t.svg.select(".xAxis").transition().duration(t.tickDuration).ease(_e["c"]).call(t.xAxis);var r=t.svg.selectAll(".bar").data(e,(function(e){return e.name}));r.enter().append("rect").attr("class",(function(e){return"bar ".concat(e.name.replace(/\s/g,"_"))})).attr("x",t.x(0)+1).attr("width",(function(e){return t.x(e.value)-t.x(0)})).attr("y",(function(){return t.y(t.top_n+1)+5})).attr("height",t.y(1)-t.y(0)-t.barPadding).style("fill",(function(e){return e.colour})).transition().duration(t.tickDuration).ease(_e["c"]).attr("y",(function(e){return t.y(e.rank)+5})),r.transition().duration(t.tickDuration).ease(_e["c"]).attr("width",(function(e){return t.x(e.value)-t.x(0)})).attr("y",(function(e){return t.y(e.rank)+5})),r.exit().transition().duration(t.tickDuration).ease(_e["c"]).attr("width",(function(e){return t.x(e.value)-t.x(0)})).attr("y",(function(){return t.y(t.top_n+1)+5})).remove();var n=t.svg.selectAll(".label").data(e,(function(e){return e.name}));n.enter().append("text").attr("class","label").attr("x",(function(e){return t.x(e.value)+12})).attr("y",(function(){return t.y(t.top_n+1)+(t.y(1)-t.y(0))/2+9})).style("text-anchor","start").html((function(e){return e.name})).style("fill",(function(e){return e.colour})).transition().duration(t.tickDuration).ease(_e["c"]).attr("y",(function(e){return t.y(e.rank)+(t.y(1)-t.y(0))/2+9})),n.transition().duration(t.tickDuration).ease(_e["c"]).attr("x",(function(e){return t.x(e.value)+12})).attr("y",(function(e){return t.y(e.rank)+(t.y(1)-t.y(0))/2+9})),n.exit().transition().duration(t.tickDuration).ease(_e["c"]).attr("x",(function(e){return t.x(e.value)+12})).attr("y",(function(){return t.y(t.top_n+1)+9})).remove();var a=t.svg.selectAll(".valueLabel").data(e,(function(e){return e.name}));a.enter().append("text").attr("class","valueLabel").attr("x",(function(){return t.x(0)-5})).attr("y",(function(){return t.y(t.top_n+1)+9})).text((function(e){return _e["d"](",.0f")(e.lastValue)})).style("text-anchor","end").style("fill","grey").transition().duration(t.tickDuration).ease(_e["c"]).attr("y",(function(e){return t.y(e.rank)+(t.y(1)-t.y(0))/2+9})),a.transition().duration(t.tickDuration).ease(_e["c"]).attr("x",(function(){return t.x(0)-5})).attr("y",(function(e){return t.y(e.rank)+(t.y(1)-t.y(0))/2+9})).tween("text",(function(e){var t=_e["f"](e.lastValue,e.value);return function(e){this.textContent=_e["d"](",")(t(e))}})),a.exit().transition().duration(t.tickDuration).ease(_e["c"]).attr("x",(function(){return t.x(0)-5})).attr("y",(function(){return t.y(t.top_n+2)+9})).remove(),t.dateText.text(de()(new Date(t.date),"yyyy-mm-dd")),t.date_index==t.date_list.length-1&&t.ticker.stop(),t.date_index++,t.date=t.date_list[t.date_index]}var t=this;null==this.ticker?this.ticker=_e["g"](e,this.tickDuration):this.ticker.restart(e,this.tickDuration)}}]),e}(),pe=function(){function e(){Object(Y["a"])(this,e)}return Object(J["a"])(e,[{key:"init_config",value:function(e){this.plot_config=e;var t=this.plot_config.viz_type,r=this.plot_config.div,n=this.plot_config.fig_type,a=this.plot_config.layout,i=this.plot_config.config;switch(t){case"plotly":var o=this.plot_config.plot_type;this.plot_obj=new ce(r,n,o),this.plot_obj.set_layout(a),this.plot_obj.set_config(i);break;case"mapbox":this.plot_obj=new le(r,n),this.plot_obj.set_layout(a),this.plot_obj.set_config(i);break;case"bar_race":this.plot_obj=new fe(e);break}}},{key:"init_map",value:function(e){void 0!=e?this.init_config(e):this.init_config(this.plot_config),this.plot_obj.gen_dots({text:[],lat:[],lon:[]})}}]),e}(),me={site_preview:new pe,source_map:new pe,wind_rose_preview:new pe,wind_rose_preview_trace:null,dot_size:15,opacity:.8,map_style:[{text:"Light Style",mapbox:{style:"light"}},{text:"Dark Style",mapbox:{style:"dark"}},{text:"Land Map",mapbox:{style:"outdoors"}},{text:"Satellite Map",mapbox:{style:"white-bg",layers:[{sourcetype:"raster",source:["https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}"],below:"traces"},{sourcetype:"streets"}]}}]},be={},ge={},ve={GEN_WINDROSE:function(e,t,r){}},ye={state:me,getters:be,actions:ge,mutations:ve};n["a"].use(s["a"]);var ke=new s["a"].Store({modules:{app_data:K,ui_control:H,plot_data:ye}}),we=r("28bd"),xe=r("f309");n["a"].use(xe["a"]);var Oe=new xe["a"]({theme:{themes:{light:{primary:"#356859",secondary:"#fffbe6",success:"#F9C413",accent:"#000033",error:"#FF0F50",info:"#37C948",warning:"#FF5722"}}}}),Ee=r("03cd"),je=r.n(Ee),De=r("bc3a"),Me=r.n(De);n["a"].use(we["a"]),n["a"].use(je.a),n["a"].config.productionTip=!1;var Pe="loacl",Ae=Me.a.create({baseURL:"loacl"===Pe?"http://127.0.0.1:5000":"https://trapsa-backend.herokuapp.com/"});n["a"].prototype.$http=Ae,new n["a"]({router:N,store:ke,vuetify:Oe,render:function(e){return e(C)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("7694"),a=r.n(n);a.a},7694:function(e,t,r){},cf1d:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return data_filter}));var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_number_constructor__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_object_entries__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4fad"),core_js_modules_es_object_entries__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_object_entries__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_8__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_9__),C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1da1"),C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("3835"),C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("d4ec"),C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("bee2"),C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("262e"),C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("2caf"),_data_clean__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("05d3"),mathjs__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("7909"),data_filter=function(_data_clean){Object(C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_14__["a"])(data_filter,_data_clean);var _super=Object(C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_15__["a"])(data_filter);function data_filter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_12__["a"])(this,data_filter),_super.call(this,e,t)}return Object(C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_13__["a"])(data_filter,[{key:"get_attr",value:function(){var e=[];this.df.forEach((function(t){for(var r=0,n=Object.entries(t);r<n.length;r++){var a=Object(C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_11__["a"])(n[r],1),i=a[0];e.includes(i)||e.push(i)}})),this.attrs=e}},{key:"add_new_col",value:function(){var e=Object(C_Users_zhouc_Desktop_heroku_trapsa_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_10__["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.df=this.df.map((function(e){var n=0;return r.forEach((function(t){isNaN(e[t])||(n+=Number(e[t]))})),e[t]=n,e})),this.attrs.push(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"add_date",value:function(e){this.df=this.df.map((function(t){return t["_date"]=new Date(t[e]),t}))}},{key:"set_col",value:function(e,t){this.df=this.df.map((function(r){switch(t){case"num":r[e]=Number(r[e]);break;case"date":r[e]=new Date(r[e]);break;case"int":r[e]=parseInt(r[e]);break;case"float":r[e]=parseFloat(r[e]);break}return r}))}},{key:"get_col",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.df;return t.map((function(t){return t[e]}))}},{key:"filter_col",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.df,n=r.filter((function(r){return t.includes(r[e])}));return n}},{key:"filter_col_rule",value:function filter_col_rule(col,rule){var df=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.df,res=df.filter((function(item){return eval("item[col]"+rule)}));return res}},{key:"unique_col",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.df,r=t.reduce((function(t,r){return""==r[e]||t.includes(r[e])||t.push(r[e]),t}),[]);return r}},{key:"stats_col",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.df,a=n.filter((function(t){return null!=t[e]})).map((function(t){return t[e]}));if(0==a.length)return null;switch(t){case"min":r=Object(mathjs__WEBPACK_IMPORTED_MODULE_17__["e"])(a);break;case"max":r=Object(mathjs__WEBPACK_IMPORTED_MODULE_17__["b"])(a);break;case"mean":r=Object(mathjs__WEBPACK_IMPORTED_MODULE_17__["c"])(a);break;case"std":r=Object(mathjs__WEBPACK_IMPORTED_MODULE_17__["f"])(a);break;case"median":r=Object(mathjs__WEBPACK_IMPORTED_MODULE_17__["d"])(a);break;case"sum":r=Object(mathjs__WEBPACK_IMPORTED_MODULE_17__["g"])(a);break;case"count":r=a.length;break}return Math.round(100*r)/100}},{key:"group_by_col",value:function(e,t,r){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.df,i=this.unique_col(e,a),o=[];return i.forEach((function(i){var c={};c[e]=i;var s=a.filter((function(t){return t[e]==i}));s.length>0?c[t]=n.stats_col(t,r,s):c[t]=null,o.push(c)})),o}}]),data_filter}(_data_clean__WEBPACK_IMPORTED_MODULE_16__["a"])},db8d:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));r("99af"),r("4de4"),r("4160"),r("caad"),r("159b");var n=r("d4ec"),a=r("bee2"),i=r("262e"),o=r("2caf"),c=(r("cb29"),r("d81d"),r("6b93"),r("4fad"),r("d3b7"),r("ddb0"),r("2909")),s=r("3835"),u=(r("96cf"),r("1da1")),l=r("cf1d"),_=(r("a630"),r("fb6a"),r("ac1f"),r("6062"),r("3ca3"),r("5319"),r("1276"),r("498a"),function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"traj_setup",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.set_job_parameter(t),i=r.filter_col("site_name",t.sites),e.next=4,this.expand_time_stamp(i,t.start_time.isExpand,t.start_time.sample_period,t.start_time.expand_number);case 4:return a.start_point=e.sent,e.next=7,this.generate_bat(a,n.df);case 7:return o=e.sent,c=o.mete_data_required.sort(),e.abrupt("return",{bat_content:o.content,curr_job:a,mete_required:c});case 10:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"set_job_parameter",value:function(e){var t;switch(e.start_height.value_type){case"Height above ground":t="0";break;case"Relative to mean sea level":t="1";break;case"Fraction of the mixed layer":t="2";break}var r=(new Date).getMonth()+1,n="NCEP/NCAR"==e.mete.type?"reanalysis":e.mete.type,a=e.job_name+"_"+(new Date).getFullYear()+("0"+r).substr(-2)+(new Date).getDate()+"_"+Math.abs(e.trajectory_time)+"H_"+n;return{job_name:a,csv_file:a+".csv",start_point:[],trajectory_time:e.trajectory_time,height:e.start_height.value,kmsl:t,working_folder:e.working,mete_folder:e.mete.path,mete_type:e.mete.type}}},{key:"expand_time_stamp",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n,a){var i,o,c,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=[],!r){e.next=9;break}if(o=parseInt(n/a),c=a,!(!o>=1)){e.next=6;break}throw new Error("Not supported! Can't be smaller than 1 hour.");case 6:for(s=0;s<t.length;s++)for(u=new Date(t[s].time_stamp),u.setHours(u.getHours()-o*c),l=0;l<c;l++)u.setHours(u.getHours()+o),i.push({time_stamp:t[s].time_stamp,site_name:t[s].site_name,traj_time_stamp:u.toLocaleString().replace(",","")});e.next=10;break;case 9:i=t.map((function(e){return{traj_time_stamp:e.time_stamp,time_stamp:e.time_stamp,site_name:e.site_name}}));case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()},{key:"generate_bat",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,c,s,u,l,_,h,d,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=[],a=t.working_folder+"\\"+t.csv_file,i="time_stamp,site_name,traj_date,",o=0;o<=Math.abs(t.trajectory_time);o++)i=i+"lat_"+o+",";for(c=0;c<=Math.abs(t.trajectory_time);c++)i=i+"lon_"+c+",";for(s=0;s<=Math.abs(t.trajectory_time);s++)i=i+"alt_"+s+",";for(u=0;u<=Math.abs(t.trajectory_time);u++)i=i+"mixd_"+u+",";for(i=[i],console.log(i),l=[["echo Start HYSPLIT...\n"]],l.push(["@echo off\n"]),l.push(["setlocal enableextensions enabledelayedexpansion\n"]),l.push(["echo "+i+" >> "+a+"\n"]),_=0;_<t.start_point.length;_++){for(h=this.job_detail(t.start_point[_],t.mete_type,r,t.trajectory_time),d=_+1,f=Math.round(d/t.start_point.length*1e4)/100,l.push(["echo Completed: "+d+"/"+t.start_point.length+", "+f+" %%\n"]),n=Array.from(new Set(n.concat(h.mete_file))),l.push(["cd working\n"]),l.push(["echo "+h.time_string+" > CONTROL\n"]),l.push(["echo 1 >> CONTROL\n"]),l.push(["echo "+h.lat+" "+h.lon+" "+t.height+" >> CONTROL\n"]),l.push(["echo "+t.trajectory_time+" >> CONTROL\n"]),l.push(["echo 0 >> CONTROL\n"]),l.push(["echo 25000.0 >> CONTROL\n"]),l.push(["echo "+h.mete_file.length+" >> CONTROL\n"]),p=0;p<h.mete_file.length;p++)l.push(["echo "+t.mete_folder+"\\ >> CONTROL\n"]),l.push(["echo "+h.mete_file[p]+" >> CONTROL\n"]);l.push(["echo "+t.working_folder+"\\working\\  >> CONTROL\n"]),l.push(["echo trapsa_temp >> CONTROL\n"]),l.push(["echo ^& setup > SETUP.CFG\n"]),l.push(["echo kmsl = "+t.kmsl+", >> SETUP.CFG\n"]),l.push(["echo tm_mixd = 1, >> SETUP.CFG\n"]),l.push(["echo / >> SETUP.CFG\n"]),l.push(["start /MIN /WAIT hyts_std.exe\n"]),l.push(["set lat= \n"]),l.push(["set lon= \n"]),l.push(["set alt= \n"]),l.push(["set mixd= \n"]),l.push(['for /f "tokens=10,11,12,14 delims= " %%i in (trapsa_temp) do (\n']),l.push(['if "!lat!"==" " (set lat=%%i) else (set lat=!lat!,%%i)\n']),l.push(['if "!lon!"==" " (set lon=%%j) else (set lon=!lon!,%%j)\n']),l.push(['if "!alt!"==" " (set alt=%%k) else (set alt=!alt!,%%k)\n']),l.push(['if "!mixd!"==" " (set mixd=%%l) else (set mixd=!mixd!,%%l))\n']),l.push(["cd ..\n"]),l.push(["echo "+h.time_stamp+","+h.site_name+","+h.traj_time_stamp+", %lat%, %lon%, %alt%, %mixd% >> "+a+"\n"])}return l.push(["echo All done.\n"]),l.push(["pause\n"]),e.abrupt("return",{content:l,mete_data_required:n});case 17:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"generate_mete_file",value:function(e,t,r){var n=[],a=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];switch(t){case"NCEP/NCAR":for(var i=0;i<3;i++){var o=e.getMonth()+1;n.push("RP"+e.getFullYear()+("0"+o).substr(-2)+".gbl"),e.setMonth(e.getMonth()-1)}break;case"GDAS1":for(var c,s=0;s<3;s++){var u=e.getFullYear();c=e.getMonth()+1==2?u%4==0&&u%100!=0||u%400==0?5:4:5,u=String(u).slice(2,4);for(var l=1;l<=c;l++)n.push("gdas1."+a[e.getMonth()]+u+".w"+l);e.setMonth(e.getMonth()-1)}break;case"GDAS0p5":for(var _=Math.ceil(Math.abs(r)/24)+1,h=0;h<_;h++){var d=e.getMonth()+1,f=e.getDate()+1;n.push(e.getFullYear()+("0"+d).substr(-2)+("0"+f).substr(-2)+"_gdas0p5"),e.setDate(e.getDate()-1)}break;case"EDAS40":for(var p=0;p<3;p++){var m=String(e.getFullYear()).slice(2,4);n.push("edas."+a[e.getMonth()]+m+".001"),n.push("edas."+a[e.getMonth()]+m+".002"),e.setMonth(e.getMonth()-1)}break;case"NARR":for(var b=0;b<3;b++){var g=e.getMonth()+1;n.push("NARR"+e.getFullYear()+("0"+g).substr(-2)),e.setMonth(e.getMonth()-1)}break}return n.length>12?n.slice(0,12):n}},{key:"job_detail",value:function(e,t,r,n){var a={time_stamp:e.time_stamp,site_name:e.site_name,traj_time_stamp:e.traj_time_stamp,time_string:"",lat:"",lon:"",mete_file:[],job_date:[]},i=new Date(e.traj_time_stamp),o=i.getMonth()+1;return a.job_date=i,a.time_string=i.getFullYear()+" "+("0"+o).substr(-2)+" "+i.getDate()+" "+i.getHours(),a.lat=r.filter((function(t){return t.site_name==e.site_name}))[0].lat,a.lon=r.filter((function(t){return t.site_name==e.site_name}))[0].lon,a.mete_file=this.generate_mete_file(i,t,n),a}},{key:"upload_traj",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,c,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={job_name:r.job_name,data:[]},a=Math.abs(r.trajectory_time),e.next=4,this.readFileAsync(t);case 4:for(i=e.sent,o=i.split("\n"),c=o[0].trim().split(",").filter((function(e){return e.length>0})),s=1;s<o.length;s++)u=o[s].trim().split(",").filter((function(e){return e.length>0})),u.length==c.length&&(l={site_name:"",time_stamp:"",traj_date:"",lat:[],lon:[],alt:[],mixed:[]},l.time_stamp=u[0],l.site_name=u[1],l.traj_date=u[2],l.lat=u.slice(3,3+a+1),l.lon=u.slice(3+a+1,3+2*a+2),l.alt=u.slice(3+2*a+2,3+3*a+3),n.data.push(l));return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"readFileAsync",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=r,n.readAsText(t)})));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),h=r("7909"),d=function(e){Object(i["a"])(r,e);var t=Object(o["a"])(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(n["a"])(this,r),e=t.call(this,a,i),e.traj_task=new _,e}return Object(a["a"])(r,[{key:"cal_wind_rose",value:function(e){for(var t,r,n,a,i=[{d:"N",lower:348.75,upper:11.25},{d:"NNE",lower:11.25,upper:33.75},{d:"NE",lower:33.75,upper:56.25},{d:"ENE",lower:56.25,upper:78.75},{d:"E",lower:78.75,upper:101.25},{d:"ESE",lower:101.25,upper:123.75},{d:"SE",lower:123.75,upper:146.25},{d:"SSE",lower:146.25,upper:168.75},{d:"S",lower:168.75,upper:191.25},{d:"SSW",lower:191.25,upper:213.75},{d:"SW",lower:213.75,upper:236.25},{d:"WSW",lower:236.25,upper:258.75},{d:"W",lower:258.75,upper:281.25},{d:"WNS",lower:281.25,upper:303.75},{d:"NW",lower:303.75,upper:326.25},{d:"NNW",lower:326.25,upper:348.75}],o=0,c=[{text:"Calm",speed:2,legend:"<2 m/s",color:"#062CFB",r:Array(16).fill(0)},{text:"Light air",speed:6,legend:"2-6 m/s",color:"#17D3FF",r:Array(16).fill(0)},{text:"Light breeze",speed:12,legend:"6-12 m/s",color:"#7DFE7A",r:Array(16).fill(0)},{text:"Gentle breeze",speed:19,legend:"12-19 m/s",color:"#FFE50D",r:Array(16).fill(0)},{text:"Moderate breeze",speed:30,legend:"19-30 m/s",color:"#FFE50D",r:Array(16).fill(0)},{text:"Fresh",speed:40,legend:"30-40 m/s",color:"#810006",r:Array(16).fill(0)},{text:"strong",speed:100,legend:">40 m/s",color:"#810006",r:Array(16).fill(0)}],s=0;s<e.length;s++)if(t=e[s].wind_dir,r=e[s].wind_speed,null!==t&&null!==r){if(o+=1,t>348.75)n=0;else for(var u=1;u<i.length;u++)if(t<=i[u].upper){n=u;break}for(var l=0;l<c.length;l++)if(r<=c[l].speed){a=l;break}c[a].r[n]+=1}for(var _=0;_<i.length;_++)for(var h=1;h<c.length;h++)c[h].r[_]>0&&(c[h].r[_]+=c[h-1].r[_]);for(var d=[],f=0;f<c.length;f++)d.push({r:c[f].r.map((function(e){return Math.round(e/o*100*100)/100})),theta:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNS","NW","NNW"],name:c[f].legend,marker:{color:c[f].color},type:"barpolar"});return d.reverse()}},{key:"cal_PSCF",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,s,u,l,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.gene_grid(t.model.grid);case 2:for(r=e.sent,n=t.model.c,a=t.data,n=parseInt((1-n)*a.length),a.sort((function(e,t){return e.conc>t.conc?-1:1})),c=0,s=0;s<a.length;s++)for(i=a[s].lat.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),o=a[s].lon.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),u=0;u<i.length;u++)s<n&&(r[i[u]][o[u]].up+=1),r[i[u]][o[u]].bottom+=1,r[i[u]][o[u]].count+=1,c+=1;return e.next=11,this.cal_res(r);case 11:return l=e.sent,e.next=14,this.apply_weight(l,c,t.model.weight);case 14:return _=e.sent,e.abrupt("return",Promise.resolve({lat:l.lat,lon:l.lon,z:_}));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cal_res",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,u,l,_,h,d,f,p,m,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=[],n=[],a=[],i=[],o=0,c=Object.entries(t);o<c.length;o++)for(u=Object(s["a"])(c[o],2),l=u[0],_=u[1],h=0,d=Object.entries(_);h<d.length;h++)f=Object(s["a"])(d[h],2),p=f[0],m=f[1],b=m.up/m.bottom,isNaN(b)||(r.push(l),n.push(p),a.push(b),i.push(m.count));return e.abrupt("return",{lat:r,lon:n,z:a,count:i});case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"apply_weight",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.z,i=t.count,r/=a.length,n=n.map((function(e){return{n:e.n*r,w:e.w}})),o=0;case 5:if(!(o<i.length)){e.next=17;break}c=0;case 7:if(!(c<n.length)){e.next=14;break}if(!(i[o]<n[c].n)){e.next=11;break}return a[o]=a[o]*n[c].w,e.abrupt("break",14);case 11:c++,e.next=7;break;case 14:o++,e.next=5;break;case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"gene_grid",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r={},n=0;n<=180/t;n++){for(a={},i=0;i<=360/t;i++)a[i*t-180]={up:null,bottom:null,count:0};r[n*t-90]=a}return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cal_CFA",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.gene_grid(t.model.grid);case 2:for(r=e.sent,n=t.data,o=0,c=0;c<n.length;c++)for(a=n[c].lat.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),i=n[c].lon.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),s=0;s<a.length;s++)r[a[s]][i[s]].up+=Math.log10(n[c].conc),r[a[s]][i[s]].bottom+=1,r[a[s]][i[s]].count+=1,o+=1;return e.next=8,this.cal_res(r);case 8:return u=e.sent,e.next=11,this.apply_weight(u,o,t.model.weight);case 11:return l=e.sent,e.abrupt("return",Promise.resolve({lat:u.lat,lon:u.lon,z:l}));case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cal_CWT",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,c,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.gene_grid(t.model.grid);case 2:for(r=e.sent,n=t.data,o=0,c=0;c<n.length;c++)for(a=n[c].lat.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),i=n[c].lon.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),s=0;s<a.length;s++)r[a[s]][i[s]].up+=n[c].conc,r[a[s]][i[s]].bottom+=1,r[a[s]][i[s]].count+=1,o+=1;return e.next=8,this.cal_res(r);case 8:return u=e.sent,e.next=11,this.apply_weight(u,o,t.model.weight);case 11:return l=e.sent,e.abrupt("return",Promise.resolve({lat:u.lat,lon:u.lon,z:l}));case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cal_SQTBA",value:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,u,l,_,d,f,p,m,b,g,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.gene_grid(t.model.grid);case 2:for(r=e.sent,n=t.data,o=0,s=Object(c["a"])(Array(n[0].lat.length).keys()),s=s.map((function(e){return 1/5.4/e})),s[0]=1,u=0;u<n.length;u++){for(a=n[u].lat.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),i=n[u].lon.map((function(e){return Math.ceil(e/t.model.grid)*t.model.grid})),l=n[u].lat[0],_=n[u].lon[0],d=[],f=[],p=1/0,m=0;m<a.length;m++)d=Math.pow(n[u].lat[m]-l,2)+Math.pow(n[u].lon[m]-_,2),f[m]=s[m]/2/Math.sqrt(6.28*d)*(1-Object(h["a"])(s[m]*Math.sqrt(d/2))),p=f[m]<p?f[m]:p;for(f[0]=p,b=0;b<a.length;b++)r[a[b]][i[b]].up+=n[u].conc*f[b],r[a[b]][i[b]].bottom+=f[b],r[a[b]][i[b]].count+=1,o+=1}return e.next=11,this.cal_res(r);case 11:return g=e.sent,e.next=14,this.apply_weight(g,o,t.model.weight);case 14:return v=e.sent,e.abrupt("return",Promise.resolve({lat:g.lat,lon:g.lon,z:v}));case 16:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(l["a"]),f=r("b9b9"),p=r.n(f),m=function(){function e(){Object(n["a"])(this,e)}return Object(a["a"])(e,[{key:"getDaysArray",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mm/dd/yyyy";e=new Date(e),t=new Date(t);for(var n=[],a=e;a<=t;a.setDate(a.getDate()+1))n.push(p()(new Date(a),r));return n}}]),e}(),b=function(e){Object(i["a"])(r,e);var t=Object(o["a"])(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Object(n["a"])(this,r),e=t.call(this,a,i,o),e.date_format=new m,e.get_attr(),e.table_header=[],e}return Object(a["a"])(r,[{key:"get_table_header",value:function(){var e=this;this.table_header=[];var t={site_name:"Site",lat:"Latitude",lon:"Longitude",wind_speed:"Wind Speed",wind_direction:"Wind Direction",time_stamp:"Timestamp"};this.attrs.forEach((function(r){void 0==t[r]?e.table_header.push({text:r,value:r}):e.table_header.push({text:t[r],value:r})}));var r=["Timestamp","Site","Latitude","Longitude","Wind Speed","Wind Direction"],n=this.table_header.filter((function(e){return"Timestamp"==e.text})),a=this.table_header.filter((function(e){return"Site"==e.text})),i=this.table_header.filter((function(e){return"Latitude"==e.text})),o=this.table_header.filter((function(e){return"Longitude"==e.text})),c=this.table_header.filter((function(e){return!r.includes(e.text)})),s=this.table_header.filter((function(e){return"Wind Speed"==e.text})),u=this.table_header.filter((function(e){return"Wind Direction"==e.text}));this.table_header=[].concat(n,a,i,o,c,s,u)}}]),r}(d)}});
//# sourceMappingURL=app.fbd5130a.js.map